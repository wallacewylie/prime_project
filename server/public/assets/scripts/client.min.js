var app=angular.module("musicApp",["ngRoute"]);app.config(["$routeProvider","$locationProvider",function(a,b){a.when("/",{templateUrl:"views/main.html",controller:"MainController"}).when("/artist",{templateUrl:"views/artist.html",controller:"ArtistController"}).when("/database",{templateUrl:"views/database.html",controller:"DatabaseController"}).when("/fail",{templateUrl:"views/fail.html",controller:"FailController"}).when("/empty",{templateUrl:"views/empty.html",controller:"EmptyController"}),b.html5Mode(!0)}]),app.controller("MainController",["$scope","$http","artistService","$location",function(a,b,c,d){a.intro={question:"What is Realm of Dusk?",paragraph:"Realm of Dusk is a website that helps you approach music with the help of a trusty guide. It can be dangerous out there, and if you're not careful you could find yourself lost in a twilight world of mediocrity and confusion. Look ahead friend! My torch is lit. Let the adventure begin."},a.spin={icon:"https://www.casinobum.com/files/includes/images/images-wheel1.png"},a.getInfo=function(){b({method:"GET",url:"http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+a.searchBox+"&api_key=d3547c51a237e9e26fcdba8e4d4a97ce&format=json"}).then(function(a){if(6==a.data.error)d.path("/empty");else{var b=a.data;b.image=b.artist.image[3]["#text"],console.log(b,"Yo"),c.setCurrentArtist(b),b.name=b.artist.name,d.path("/database")}},function(a){})},a.toSpin=!1,a.changeClass=function(){return a.toSpin===!1?"image-stationary":"image-to-spin"},randomArtist=function(a){var b=Math.floor(Math.random()*(a.length-1)),c=a[b];return console.log(c),c},a.myFunction=function(){a.toSpin=!0,setTimeout(function(){b.get("/artist/grab").then(function(a){var b=a.data;return randomArtist(b)}).then(function(a){b({method:"GET",url:"http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+a.name+"&api_key=d3547c51a237e9e26fcdba8e4d4a97ce&format=json"}).then(function(b){var e=b.data;a.image=e.artist.image[3]["#text"],c.setCurrentArtist(a),d.path("/artist")},function(a){})})},4010)}}]),app.controller("ArtistController",["$scope","artistService","$location",function(a,b,c){a.artistToShow=b.getCurrentArtist()}]),app.controller("DatabaseController",["$scope","$http","artistService","$location",function(a,b,c,d){a.artistToShow=c.getCurrentArtist(),a.data={welcome:"Look! It's a picture of "+a.artistToShow.name+". Time for the next step. You must click the button to find the Realm Of Dusk judgement, or return home. Make the call!"};var e=!1;chosenArtist=function(b){console.log(a.artistToShow.name,"Anthony");for(var c=0;c<b.length;c++)if(a.artistToShow.name==b[c].name){var d=b[c];e=!0,console.log(d,"New")}return d},a.artistFunction=function(){b.get("/artist/grab").then(function(a){return mongoArray=a.data,console.log(mongoArray,"All"),chosenArtist(mongoArray)}).then(function(f){e===!1?d.path("/fail"):b({method:"GET",url:"http://ws.audioscrobbler.com/2.0/?method=artist.getinfo&artist="+f.name+"&api_key=d3547c51a237e9e26fcdba8e4d4a97ce&format=json"}).then(function(a){var b=a.data;f.image=b.artist.image[3]["#text"],c.setCurrentArtist(f),d.path("/artist")},function(b){d.path("/fail"),a.artistToShow.name=a.noEntry})})}}]),app.controller("FailController",["$scope","artistService","$location",function(a,b,c){a.noEntry={message:"We're really sorry, but Realm Of Dusk doesn't have a page on this artist yet. Trust us, we have an opinion. Just be patient friend!",icon:"https://dougernst.files.wordpress.com/2010/06/axldoctrine.jpg"}}]),app.controller("EmptyController",["$scope","artistService","$location",function(a,b,c){a.noData={message:"Either this artist does not exist, you spelled their name incorrectly, or you just put a bunch of goobledygook in the search box. Try again friend!",icon:"http://gazettereview.com/wp-content/uploads/2016/02/Honey-boo-boo.jpg"}}]),app.factory("artistService",["$http",function(a){var b={},c="";return b.setCurrentArtist=function(a){c=a},b.getCurrentArtist=function(){return c},b}]);